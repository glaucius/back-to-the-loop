{% extends "base.html" %}

{% block title %}Dashboard - BTL Backoffice{% endblock %}

{% block page_title %}Dashboard{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item active">Dashboard</li>
{% endblock %}

{% block content %}
<!-- Small boxes (Stat box) -->
<div class="row">
  {% if current_user.is_admin() %}
  <div class="col-lg-4 col-4">
    <!-- small box -->
    <div class="small-box bg-info">
      <div class="inner">
        <h3>{{ stats.total_users }}</h3>
        <p>Total Users</p>
      </div>
      <div class="icon">
        <i class="ion ion-person-add"></i>
      </div>
      <a href="{{ url_for('users.list_users') }}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->
  <div class="col-lg-4 col-4">
    <!-- small box -->
    <div class="small-box bg-success">
      <div class="inner">
        <h3>{{ stats.total_organizacoes }}</h3>
        <p>Organizations</p>
      </div>
      <div class="icon">
        <i class="ion ion-stats-bars"></i>
      </div>
      <a href="{{ url_for('organizacoes.list_organizacoes') }}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->
  <div class="col-lg-4 col-4">
    <!-- small box -->
    <div class="small-box bg-warning">
      <div class="inner">
        <h3>{{ stats.total_backyards }}</h3>
        <p>Total Backyards</p>
      </div>
      <div class="icon">
        <i class="ion ion-location"></i>
      </div>
      <a href="{{ url_for('backyards.list_backyards') }}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->
  {% else %}
  <!-- Organizador View -->
  <div class="col-lg-4 col-6">
    <!-- small box -->
    <div class="small-box bg-success">
      <div class="inner">
        <h3>{{ stats.my_organizacoes }}</h3>
        <p>My Organizations</p>
      </div>
      <div class="icon">
        <i class="ion ion-stats-bars"></i>
      </div>
      <a href="{{ url_for('organizacoes.list_organizacoes') }}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->
  <div class="col-lg-4 col-6">
    <!-- small box -->
    <div class="small-box bg-warning">
      <div class="inner">
        <h3>{{ stats.my_backyards }}</h3>
        <p>My Backyards</p>
      </div>
      <div class="icon">
        <i class="ion ion-location"></i>
      </div>
      <a href="{{ url_for('backyards.list_backyards') }}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->
  {% endif %}
</div>
<!-- /.row -->

<!-- Main row -->
<div class="row">
  <!-- Left col -->
  <section class="col-lg-3 connectedSortable">
    <!-- Custom tabs (Charts with tabs)-->
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <i class="fas fa-chart-pie mr-1"></i>
          Quick Actions
        </h3>
      </div><!-- /.card-header -->
      <div class="card-body">
        <div class="row">
          {% if current_user.is_admin() %}
          <div class="col-md-12">
            <div class="info-box">
              <span class="info-box-icon bg-info"><i class="far fa-user"></i></span>
              <div class="info-box-content">
                <span class="info-box-text">Create User</span>
                <span class="info-box-number">
                  <a href="{{ url_for('users.create_user') }}" class="btn btn-sm btn-primary">
                    <i class="fas fa-plus"></i> Add User
                  </a>
                </span>
              </div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="info-box">
              <span class="info-box-icon bg-success"><i class="far fa-building"></i></span>
              <div class="info-box-content">
                <span class="info-box-text">Create Organization</span>
                <span class="info-box-number">
                  <a href="{{ url_for('organizacoes.create_organizacao') }}" class="btn btn-sm btn-success">
                    <i class="fas fa-plus"></i> Add Organization
                  </a>
                </span>
              </div>
            </div>
          </div>
          {% endif %}
          {% if current_user.is_admin() or current_user.is_organizador() %}
          <div class="col-md-12">
            <div class="info-box">
              <span class="info-box-icon bg-warning"><i class="far fa-map"></i></span>
              <div class="info-box-content">
                <span class="info-box-text">Create Backyard</span>
                <span class="info-box-number">
                  <a href="{{ url_for('backyards.create_backyard') }}" class="btn btn-sm btn-warning">
                    <i class="fas fa-plus"></i> Add Backyard
                  </a>
                </span>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div><!-- /.card-body -->
    </div>
    <!-- /.card -->
  </section>
  <!-- /.Left col -->

  <!-- right col (We are only adding the ID to make the widgets sortable)-->
  <section class="col-lg-9 connectedSortable">
    <!-- Map card -->
    <div class="card bg-gradient-primary">
      <div class="card-header border-0">
        <h3 class="card-title">
          <i class="fas fa-user mr-1"></i>
          User Information
        </h3>
      </div>
      <div class="card-body">
        <div class="d-flex">
          <p class="d-flex flex-column">
            <span class="text-bold text-lg">{{ current_user.nome }}</span>
            <span>{{ current_user.email }}</span>
          </p>
        </div>
        <!-- /.d-flex -->

        <div class="d-flex flex-row justify-content-end">
          <span class="mr-2">
            <span class="text-white">Profile:</span>
            <i class="fas fa-user-tag text-white"></i>
          </span>
          <span class="text-white">{{ current_user.profile.nome }}</span>
        </div>
        <!-- /.d-flex -->
      </div>
    </div>
    <!-- /.card -->

    <!-- Calendar -->
    <div class="card bg-gradient-success">
      <div class="card-header border-0">
        <h3 class="card-title">
          <i class="far fa-calendar-alt"></i>
          System Information
        </h3>
      </div>
      <!-- /.card-header -->
      <div class="card-body pt-0">
        <!-- The calendar -->
        <div class="d-flex">
          <p class="d-flex flex-column">
            <span class="text-bold text-lg">BTL Backoffice</span>
            <span>Version 1.0.0</span>
          </p>
        </div>
        <!-- /.d-flex -->
        <div class="d-flex flex-row justify-content-end">
          <span class="mr-2">
            <span class="text-white">Status:</span>
            <i class="fas fa-circle text-white"></i>
          </span>
          <span class="text-white">Online</span>
        </div>
      </div>
      <!-- /.card-body -->
    </div>
    <!-- /.card -->
  </section>
  <!-- right col -->
</div>
<!-- /.row (main row) -->
{% endblock %}

{% block extra_css %}
<!-- ionicons -->
<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
{% endblock %}
