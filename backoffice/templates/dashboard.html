{% extends "base.html" %}

{% block title %}Dashboard - BTL Backoffice{% endblock %}

{% block page_title %}Dashboard{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item active">Dashboard</li>
{% endblock %}

{% block content %}
<!-- Small boxes (Stat box) -->
<div class="row">
  {% if current_user.is_admin() %}
  <div class="col-lg-4 col-4">
    <!-- small box -->
    <div class="small-box bg-warning">
      <div class="inner">
        <h3>{{ stats.total_backyards }}</h3>
        <p>Total de Backyards</p>
      </div>
      <div class="icon">
        <i class="ion ion-location"></i>
      </div>
      <a href="{{ url_for('backyards.list_backyards') }}" class="small-box-footer">Mais detalhes <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->

  <div class="col-lg-4 col-4">
    <!-- small box -->
    <div class="small-box bg-info">
      <div class="inner">
        <h3>{{ stats.total_users }}</h3>
        <p>Total de Atletas</p>
      </div>
      <div class="icon">
        <i class="ion ion-person-add"></i>
      </div>
      <a href="{{ url_for('users.list_users') }}" class="small-box-footer">Mais detalhes <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->
  <div class="col-lg-4 col-4">
    <!-- small box -->
    <div class="small-box bg-success">
      <div class="inner">
        <h3>{{ stats.total_organizacoes }}</h3>
        <p>Organizações</p>
      </div>
      <div class="icon">
        <i class="ion ion-stats-bars"></i>
      </div>
      <a href="{{ url_for('organizacoes.list_organizacoes') }}" class="small-box-footer">Mais detalhes <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->
  {% else %}
  <!-- Organizador View -->
  <div class="col-lg-4 col-6">
    <!-- small box -->
    <div class="small-box bg-success">
      <div class="inner">
        <h3>{{ stats.my_organizacoes }}</h3>
        <p>Minhas organizações</p>
      </div>
      <div class="icon">
        <i class="ion ion-stats-bars"></i>
      </div>
      <a href="{{ url_for('organizacoes.list_organizacoes') }}" class="small-box-footer">Mais detalhes <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->
  <div class="col-lg-4 col-6">
    <!-- small box -->
    <div class="small-box bg-warning">
      <div class="inner">
        <h3>{{ stats.my_backyards }}</h3>
        <p>Minhas backyards</p>
      </div>
      <div class="icon">
        <i class="ion ion-location"></i>
      </div>
      <a href="{{ url_for('backyards.list_backyards') }}" class="small-box-footer">Mais detalhes <i class="fas fa-arrow-circle-right"></i></a>
    </div>
  </div>
  <!-- ./col -->
  {% endif %}
</div>
<!-- /.row -->

<!-- Main row -->
<div class="row">
  <!-- Left col -->
  <section class="col-lg-3 connectedSortable">
    <!-- Custom tabs (Charts with tabs)-->
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <i class="fas fa-chart-pie mr-1"></i>
          Ações rápidas
        </h3>
      </div><!-- /.card-header -->
      <div class="card-body">
        <div class="row">
          {% if current_user.is_admin() %}
          <div class="col-md-12">
            <div class="info-box">
              <span class="info-box-icon bg-info"><i class="far fa-user"></i></span>
              <div class="info-box-content">
                <span class="info-box-text">Novo usuário</span>
                <span class="info-box-number">
                  <a href="{{ url_for('users.create_user') }}" class="btn btn-sm btn-primary">
                    <i class="fas fa-plus"></i> Adicionar usuário
                  </a>
                </span>
              </div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="info-box">
              <span class="info-box-icon bg-success"><i class="far fa-building"></i></span>
              <div class="info-box-content">
                <span class="info-box-text">Criar Organização</span>
                <span class="info-box-number">
                  <a href="{{ url_for('organizacoes.create_organizacao') }}" class="btn btn-sm btn-success">
                    <i class="fas fa-plus"></i> Adicionar Organização
                  </a>
                </span>
              </div>
            </div>
          </div>
          {% endif %}
          {% if current_user.is_admin() or current_user.is_organizador() %}
          <div class="col-md-12">
            <div class="info-box">
              <span class="info-box-icon bg-warning"><i class="far fa-map"></i></span>
              <div class="info-box-content">
                <span class="info-box-text">Criar Backyard</span>
                <span class="info-box-number">
                  <a href="{{ url_for('backyards.create_backyard') }}" class="btn btn-sm btn-warning">
                    <i class="fas fa-plus"></i> Adicionar Backyard
                  </a>
                </span>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div><!-- /.card-body -->
    </div>
    <!-- /.card -->
  </section>
  <!-- /.Left col -->

  <!-- right col (We are only adding the ID to make the widgets sortable)-->
  <section class="col-lg-9 connectedSortable">
    <!-- Map card -->
    <div class="card bg-gradient-light">
      <div class="card-header border-0">
        <h3 class="card-title">
          <i class="fas fa-user mr-1"></i>
          Próximas Backyards - as próximas 10 !!!!!!! 
        </h3>
      </div>
      <div class="card-body">
        <div class="d-flex">
          <p class="d-flex flex-column">
            <span class="text-bold text-lg">Próximas Backyards</span>
          </p>
        </div>
        <!-- /.d-flex -->
      </div>
    </div>
    <!-- /.card -->

  </section>
  <!-- right col -->
</div>
<!-- /.row (main row) -->
{% endblock %}

{% block extra_css %}
<!-- ionicons -->
<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
{% endblock %}
