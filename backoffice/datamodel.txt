BTL (Backyard Trail League) - Data Model
==========================================

Class Profile
    id, integer, PK, auto_increment
    nome, varchar(255), not_null
    data_criacao, datetime, default=utcnow
    data_ultima_atualizacao, datetime, default=utcnow, onupdate=utcnow

    Relationships:
    - One-to-Many with Backend_Users

Class Backend_Users (UserMixin)
    id, integer, PK, auto_increment
    nome, varchar(255), not_null
    email, varchar(255), not_null, unique
    password, varchar(255), not_null
    profile_id, integer, FK to profiles.id, not_null
    data_criacao, datetime, default=utcnow
    data_ultima_atualizacao, datetime, default=utcnow, onupdate=utcnow

    Relationships:
    - Many-to-One with Profile
    - One-to-Many with Organizacao

    Methods:
    - is_admin() -> returns profile.nome == 'Admin'
    - is_organizador() -> returns profile.nome == 'Organizador'

Class Organizacao
    id, integer, PK, auto_increment
    nome, varchar(255), not_null
    organizador, integer, FK to backend_users.id, not_null
    data_criacao, datetime, default=utcnow
    data_ultima_atualizacao, datetime, default=utcnow, onupdate=utcnow

    Relationships:
    - Many-to-One with Backend_Users (organizador)
    - One-to-Many with Backyard

Class Backyard
    id, integer, PK, auto_increment
    nome, varchar(255), not_null
    organizador, integer, FK to organizacoes.id, not_null
    descricao, text, nullable
    endereco, varchar(255), nullable
    cidade, varchar(255), nullable
    estado, varchar(255), nullable
    pais, varchar(255), nullable
    profile_picture_path, varchar(255), nullable  # Foto principal da backyard
    logo_path, varchar(255), nullable  # Logo da backyard
    data_evento, datetime, nullable  # Data e hora do início do evento
    data_criacao, datetime, default=utcnow
    data_ultima_atualizacao, datetime, default=utcnow, onupdate=utcnow

    Relationships:
    - Many-to-One with Organizacao
    - Many-to-Many with Atleta (through AtletaBackyard)

Class Atleta (UserMixin)
    id, integer, PK, auto_increment
    nome, varchar(255), not_null
    cpf, varchar(14), unique, not_null
    email, varchar(255), not_null, unique
    password, varchar(255), not_null
    data_nascimento, date, nullable
    imagem_perfil, varchar(255), nullable  # Path da imagem cortada/processada
    endereco, varchar(255), nullable
    cidade, varchar(255), nullable
    estado, varchar(255), nullable
    pais, varchar(255), nullable
    criado_em, datetime, default=utcnow
    atualizado_em, datetime, default=utcnow, onupdate=utcnow

    Relationships:
    - Many-to-Many with Backyard (through AtletaBackyard)

Class AtletaBackyard (Association Table)
    id, integer, PK, auto_increment
    atleta_id, integer, FK to atletas.id, not_null
    backyard_id, integer, FK to backyards.id, not_null
    data_inscricao, datetime, default=utcnow
    status_inscricao, varchar(50), default='inscrito'  # inscrito, cancelado, finalizado
    posicao_final, integer, nullable  # Posição final na corrida (1 = vencedor, 2 = segundo, etc.)
    voltas_completadas, integer, default=0  # Número de voltas completadas
    tempo_total, time, nullable  # Tempo total de corrida

    Relationships:
    - Many-to-One with Atleta
    - Many-to-One with Backyard

==========================================
System Features:
- User authentication and authorization (Admin, Organizador profiles)
- Image upload and cropping for athlete profiles (Cropper.js integration)
- MinIO object storage for images
- Event management and athlete registration
- Race results tracking (position, laps, time)
- Multi-organization support

Image Processing:
- Profile pictures are cropped to square format (1:1 aspect ratio)
- Images stored in MinIO with folder structure: atletas/profile_picture/
- Cropped images are 400x400px in JPEG format with 90% quality
- Fallback to regular upload if crop is not used

Database Relationships Summary:
- Profile -> Backend_Users (1:N)
- Backend_Users -> Organizacao (1:N)
- Organizacao -> Backyard (1:N)
- Atleta <-> Backyard (M:N through AtletaBackyard)